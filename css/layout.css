/* ====== DESKTOP (padrão) ====== */
.app{
  display: grid;
  grid-template-columns: 260px 1fr;
  height: 52px;
  grid-template-areas:
    "sidebar topbar"
    "sidebar main";
  min-height: 100vh;
  gap: 0; /* sem “gutter” */
}

.sidebar{
  grid-area: sidebar;
  background: var(--bg);
  border-right: 1px solid var(--border);
  padding: var(--space-3);
  position: static; /* fica no fluxo no desktop */
  box-shadow: none;
  z-index: 10;
}

.brand{ display: flex; align-items: center; justify-content: space-between; padding-right: .5rem; }

.topbar{
  grid-area: topbar;
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; gap: var(--space-3);
  padding: 0 var(--space-3);
}

.content{ grid-area: main; } /* ocupa área principal */
.main{ grid-area: main; overflow: hidden; }

.map-wrap{
  position: relative;
  height: calc(100vh - 64px);
  background: #111;
  min-height: 420px;
}
/* Leaflet container */
#map.map{
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  z-index: 0; /* base */
}

.status{
  position: absolute; top: 80px; right: 24px; width: 340px;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius-lg); box-shadow: var(--shadow-2);
}

/* ====== MOBILE (≤960px) ====== */
@media (max-width: 960px){
  /* App vira coluna e ocupa altura real do aparelho */
  .app{
    grid-template-columns: 1fr;
    height: 64;
    grid-template-areas: "topbar" "main";
    min-height: 100dvh;
  }

  /* Topbar fixa no topo */
  .topbar {
  grid-area: topbar;
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;      /* já centraliza verticalmente */
  gap: var(--space-3);
  padding: 0 var(--space-3);
  height: 52px;             /* altura reduzida */
  line-height: 1;           /* evita que o texto fique “esticado” */
}

.topbar input,
.topbar .theme-switch,
.topbar #userAvatar {
  height: 36px;             /* menor que os 44/48px originais */
}

.greet {
  font-size: .9rem;
  line-height: 1;           /* mantém alinhado */
  display: flex;
  align-items: center;      /* força centralização com o avatar */
}


  /* Sidebar vira off-canvas (acima do mapa) */
  .sidebar{
    position: fixed;
    inset: 0 auto 0 0;
    width: min(82vw, 320px);
    translate: -100% 0;
    transition: translate .28s cubic-bezier(.22,.61,.36,1);
    z-index: 2000;            /* acima do Leaflet */
    background: var(--bg);
    border-right: none;       /* evita “risco branco” no mobile */
    box-shadow: var(--shadow-2);
  }
  .sidebar.is-open{ translate: 0 0; }

  /* Backdrop transparente (sem cinza) e sem bloquear clique */
  .sidebar::after{
    content:"";
    position: fixed; inset: 0;
    background: transparent;
    opacity: 0; pointer-events: none;
  }

  /* Conteúdo principal */
  .content{ grid-area: main; }
  .main{ grid-area: main; overflow: visible; }

  /* Mapa com altura real abaixo da topbar */
  .map-wrap{
    position: relative;
    height: calc(100dvh - 56px);
    min-height: 420px;
  }
  #map.map{
    position: absolute; inset: 0;
    width: 100%; height: 100%;
    z-index: 0; /* base */
  }

  /* Controles do Leaflet abaixo da sidebar (mas acima do mapa) */
  .leaflet-control-container{ z-index: 1200; }

  /* Painel de status como bloco normal */
  .status{
    position: static !important;
    width: auto !important;
    margin: 12px !important;
    z-index: auto !important;
  }
}

/* ====== EXTRAS Desktop ====== */
@media (min-width: 961px){
  /* o hambúrguer não aparece no desktop */
  #btnOpenSidebar{ display: none !important; }
}
